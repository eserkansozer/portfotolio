@using Portfotolio.Domain
@using Portfotolio.Site4.Extensions

@model DomainPhoto
@{
    const float fixedHeight = 400;
    var verticalShrinkRatio = fixedHeight / (float)Model.Medium640Height;
    var ratio = (float)Model.Medium640Height / (float)Model.Medium640Width;
    if (ratio > 2 || ratio < 0.5) //exceptional ratio
    {
        return;
    }
    var alignedWidth = Model.Medium640Width * verticalShrinkRatio;
}

<div class="slide" style="width: @(alignedWidth +6)px; height:@(fixedHeight+6)px">
    <div class="photo-frame">
        @if (Model.IsLicensed || Html.AuthenticationInfo().IsAuthenticated)
        {
            <a class="photo-link" 
               href="@Model.PageUrl" 
               style="background: url('@Model.Medium640Url'); background-size: @(alignedWidth)px @(fixedHeight)px; width: @(alignedWidth)px; height:@(fixedHeight)px" ></a>
        }
        else
        {
            <a class="photo-link" 
                href="@Model.PageUrl" 
                style="width: @(Model.Medium640Width)px; height: @(Model.Medium640Height)px;">
            </a>
            <a href="@Url.Action("licensing", "settings")" class="copyright" style="top: @(fixedHeight-50)px; left: @(alignedWidth-40)px" title="Copyrighted image. Click for more information.">&copy;</a>
        }
        <div class="title-frame" style="top:@(fixedHeight-50)px; height: 0px; transition: height 1s 0.5s">
            <span class="title-text" title="@Model.Title">
                Title: @Model.Title <br/>
                Views: @Model.Views <br/>
                Date Taken: @Model.DateTaken
            </span>
        </div>
        
@*        <div class="exif-frame" style="top:0px; height: 0px; transition: height 1s 0.5s">
                @foreach (var exif in Model.ExifData)
                {
                    @Html.Raw(exif.Key)
                    @Html.Raw(" : ")
                    @Html.Raw(exif.Value)
                    @Html.Raw("</br>")
                }
        </div>*@
    </div>
</div>

<script>
    $(document).ready(function () {
        $(".photo-frame").hover(function () {
            $(".title-frame", this).css("height", "50px");
            $(".exif-frame", this).css("height", "150px");
        }, function () {
            $(".title-frame", this).css("height", "0px");
            $(".exif-frame", this).css("height", "0px");
        });
    });

</script>
@using Portfotolio.Domain
@using Portfotolio.Site4.Extensions

@model DomainPhoto
@{
    const int slideWidth = 350;  // if you change these values, change them in CSS .slide as well
    const int slideHeight = 350; // if you change these values, change them in CSS .slide as well
    const int borderWidth = 5;   // if you change these values, change them in CSS .photo-link as well
    int frameWidth = Model.SmallWidth + 2 * borderWidth;
    int frameHeight = Model.SmallHeight + 2 * borderWidth;
    int frameLeft = (slideWidth - frameWidth) / 2;
    int frameTop = (slideHeight - frameHeight) / 2;
    int titleTop = frameTop + frameHeight + 10;
    int titleHeight = slideHeight - titleTop;
    string pictureUrl = Model.IsLicensed ? Model.SmallUrl : string.Empty;
}

<div class="slide">
    <div class="photo-frame" style="left: @(frameLeft)px; top: @(frameTop)px">
        @if (Model.IsLicensed)
        {
            <a class="photo-link" 
               href="@Model.PageUrl" 
               style="background-image: url('@pictureUrl'); width: @(Model.SmallWidth)px; height: @(Model.SmallHeight)px;" ></a>
        }
        else
        {
            <a class="photo-link" 
                href="@Model.PageUrl" 
                style="width: @(Model.SmallWidth)px; height: @(Model.SmallHeight)px;">
                <a href="@Url.Action("author", "settings")" style="position: absolute; top: @(frameHeight-50)px; left: @(frameWidth-40)px; font-size: 40px; font-weight: bold" title="Copyrighted image. Click for change your settings.">&copy;</a>
            </a>
        }
    </div>
    <div class="title-frame" style="top: @(titleTop)px; max-height: @(titleHeight)px">
        @(Html.ActionLinkUserId(Model.AuthorName ?? Model.AuthorAlias, "photos", new { id = Model.AuthorAlias })):
        <span class="title-text" title="@Model.Title">
            @Model.Title
        </span>
    </div>
</div>
